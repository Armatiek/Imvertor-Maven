name: Get package versions

on:
  workflow_dispatch:
  release:
    types: [created]

jobs:
  build:

    runs-on: ubuntu-latest
    permissions:
      contents: read
      packages: write

    steps:
    - name: Get package versions
      uses: actions/github-script@v7
      id: get-versions
      with:
        result-encoding: string
        retries: 3
        script: |
          const versions = octokit.rest.packages.getAllPackageVersionsForPackageOwnedByOrg({
            package_type,
            'imvertor_arm.imvertor_arm',
            'Armatiek'
          })
          console.log(versions)
